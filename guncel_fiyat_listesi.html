
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title> Güncel Fiyat Listesi</title>
    <style>
        

        body {
            font-family: Arial;
            background-color: #f4f6f8;
            padding: 20px;
        }
        h1 {
            color: #28a745;
        }
        input {
            padding: 10px;
            width: 300px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
        }
        th {
            background-color: #28a745;
            color: #fff;
        }
        #loadMore {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1> Türkiye Geneli Güncel Fiyat Listesi</h1>
    <input type="text" id="searchInput" placeholder="Örn: Adana - Afyon">
    <table>
        <thead>
            <tr>
                <th>Kalkış-Varış</th>
                <th>Güncel Fiyat </th>
                <th>Düşük Fiyat</th>
                <th>Yüksek Fiyat </th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
    <button id="loadMore">+50</button>

    <script>
        let allData = [];
        let filteredData = [];
        let displayIndex = 0;
        const limit = 50;

        fetch('guncel_data.json')
            .then(res => res.json())
            .then(data => {
                allData = data;
                filteredData = [...allData];
                displayIndex = 0;
                renderNext();
            });

        function normalize(text) {
            return text
                .toLowerCase()
                .replace(/–|—/g, "-")
                .replace(/\s+/g, " ")
                .trim();
        }

        function renderNext() {
            const body = document.getElementById("tableBody");
            const chunk = filteredData.slice(displayIndex, displayIndex + limit);
            chunk.forEach(item => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${item.route}</td>
                    <td>${item.price}</td>
                    <td>${item.min}</td>
                    <td>${item.max}</td>
                `;
                body.appendChild(tr);
            });
            displayIndex += limit;
            document.getElementById("loadMore").style.display =
                displayIndex >= filteredData.length ? "none" : "block";
        }

        document.getElementById("searchInput").addEventListener("input", function () {
            const keyword = normalize(this.value);
            const parts = keyword.split("-");
            filteredData = allData.filter(d =>
                parts.every(p => normalize(d.route).includes(p.trim()))
            );
            displayIndex = 0;
            document.getElementById("tableBody").innerHTML = "";
            renderNext();
        });

        document.getElementById("loadMore").addEventListener("click", renderNext);
    </script>
</body>
</html>
